!function(i){var n={};function o(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=i,o.c=n,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=21)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(8),o=i(6),s=i(4),a=i(2),r=i(9),u=(c.init=function(t,e,i,n,o){void 0===i&&(i=null),void 0===n&&(n=30),void 0===o&&(o=!1),null==this._instance&&(this._instance=new c);var r=this._instance;return r._clearColor=null==i?new s.Color(.3,.6,.9,1):i,r.framerate=n,r._debug=o,r._canvas=document.createElement("canvas"),r._context=r._canvas.getContext("2d"),r._canvas.width=t,r._canvas.height=e,r._root=new a.Container,r._root.name="__root",document.body.appendChild(r._canvas),r.clear(),r._lastUpdate=Date.now(),r.addEventListeners(),r.updateAnimationFrame(),r},Object.defineProperty(c,"instance",{get:function(){return c._instance},enumerable:!0,configurable:!0}),Object.defineProperty(c,"context",{get:function(){return c._instance._context},enumerable:!0,configurable:!0}),c.prototype.play=function(){this._lastUpdate=Date.now(),this._isPaused=!1},c.prototype.pause=function(){this._isPaused=!0,r.AudioMixer.pauseAll()},Object.defineProperty(c.prototype,"isPaused",{get:function(){return this._isPaused},enumerable:!0,configurable:!0}),c.prototype.addEventListeners=function(){var t=this.instance._canvas;t.onclick=this.instance._onClick,t.onmousedown=this.instance._onMouseDown,t.onmouseup=this.instance._onMouseUp,t.onmousemove=this.instance._onMouseMove,t.ontouchstart=this.instance._onTouchStart,t.ontouchend=this.instance._onTouchEnd,window.onblur=this.instance._onBlur,window.onfocus=this.instance._onFocus},Object.defineProperty(c.prototype,"canvas",{get:function(){return this._canvas},enumerable:!0,configurable:!0}),c.prototype._onTouchStart=function(){},c.prototype._onTouchEnd=function(){},c.prototype._onClick=function(){},c.prototype._onMouseDown=function(){},c.prototype._onMouseUp=function(){},c.prototype._onMouseMove=function(){},c.prototype._onBlur=function(){this._isPaused||(this._isFocussed=!1,c._instance.pause(),r.AudioMixer.pauseAll())},c.prototype._onFocus=function(){this._isFocussed||(this._isFocussed=!0,c._instance.play(),r.AudioMixer.resume())},Object.defineProperty(c.prototype,"instance",{get:function(){return c._instance},enumerable:!0,configurable:!0}),c.prototype.domElement=function(){return this._context},Object.defineProperty(c.prototype,"framerate",{get:function(){return this._framerate},set:function(t){this._framerate=t,this._updateInterval=1/this._framerate},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"root",{get:function(){return this._root},set:function(t){this._root=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"clearColor",{get:function(){return this._clearColor},set:function(t){this._clearColor=t},enumerable:!0,configurable:!0}),c.prototype.updateAnimationFrame=function(){var t=c._instance;if(window.requestAnimationFrame(t.updateAnimationFrame),!t._isPaused){var e=Date.now(),i=(e-t._lastUpdate)/1e3;for(o.Timer.deltaSeconds=i,t._accumulator+=i;t._accumulator>=t._updateInterval;)t.update(i),t._accumulator-=t._updateInterval;t._lastUpdate=e}},c.prototype.update=function(){var t=c._instance;t.resetCanvasState(),t.clear(),n.Tweener.update(o.Timer.deltaSeconds),t._root.update(!0),t._root.draw(),t._debug&&t._root.drawDebug()},c.prototype.resetCanvasState=function(){this._context.resetTransform(),this._context.globalAlpha=1,this._context.imageSmoothingEnabled=!0,this._context.globalCompositeOperation="source-over"},c.prototype.clear=function(){this._context.fillStyle=this._clearColor.toHexRGB(),this._context.fillRect(0,0,this._canvas.width,this._canvas.height)},c);function c(){this._clearColor=new s.Color(.3,.6,.9),this._framerate=30,this._debug=!1,this._lastUpdate=0,this._accumulator=0,this._updateInterval=0}e.Stage=u},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(n.LOADED="loaded",n.ERROR="error",n.TIMEOUT="timeout",n.COMPLETE="complete",n.STARTED="started",n.CLICK="click",n.MOUSE_DOWN="mousedown",n.MOUSE_UP="mouseup",n.MOUSE_OVER="mouseover",n.MOUSE_OUT="mouseout",n);function n(){}e.EventType=i},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=i(24),a=(r=s.Spatial,o(u,r),u.prototype.dispose=function(){this.removeAllChildren(),this._children=null,r.prototype.dispose.call(this)},Object.defineProperty(u.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),u.prototype.addChild=function(t){-1==this._children.lastIndexOf(t)&&(t.parent=this)._children.push(t)},u.prototype.removeChild=function(t){var e=this._children.lastIndexOf(t);-1!=e&&(t.parent=null,this._children.splice(e,1))},u.prototype.removeAllChildren=function(){var e=this;this._children.forEach(function(t){t.parent=null,e.removeChild(t)}),this._children=[]},u.prototype.updateWorldData=function(){r.prototype.updateWorldData.call(this);for(var t=0,e=this._children;t<e.length;t++){var i=e[t];null!=i&&i.update(!1)}},u.prototype.draw=function(){for(var t=0,e=this._children;t<e.length;t++){var i=e[t];null!=i&&i.draw()}},u.prototype.drawDebug=function(){for(var t=0,e=this._children;t<e.length;t++)e[t].drawDebug()},u);function u(){var t=r.call(this)||this;return t._children=[],t}e.Container=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(Object.defineProperty(n,"ZERO",{get:function(){return new n(0,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n,"ONE",{get:function(){return new n(1,1)},enumerable:!0,configurable:!0}),Object.defineProperty(n,"AXIS_X",{get:function(){return new n(1,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n,"AXIS_Y",{get:function(){return new n(0,1)},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){},n.prototype.add=function(t){this.x+=t.x,this.y+=t.y},n.prototype.subtract=function(t){this.x-=t.x,this.y-=t.y},n.prototype.multiply=function(t){this.x*=t.x,this.y*=t.y},n.prototype.divide=function(t){this.x/=t.x,this.y/=t.y},n.prototype.scale=function(t){this.x*=t,this.y*=t},n.prototype.dot=function(t){return this.x*t.x+this.y*t.y},n.prototype.reflection=function(t){var e=t.clone(),i=this.clone(),n=i.dot(e);return e.scale(n),e.scale(2),i.subtract(e),i},n.prototype.invert=function(){this.x*=-1,this.y*=-1},n.prototype.normalize=function(){if(length<Number.EPSILON)this.x=0,this.y=0;else{var t=1/length;this.x*=t,this.y*=t}},n.prototype.squaredLength=function(){return this.x*this.x+this.y*this.y},n.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},n.prototype.set=function(t,e){this.x=t,this.y=e},n.prototype.clone=function(){return new n(this.x,this.y)},Object.defineProperty(n.prototype,"isZero",{get:function(){return 0==this.x&&0==this.y},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isOne",{get:function(){return 1==this.x&&1==this.y},enumerable:!0,configurable:!0}),n.prototype.toString=function(){return"[Point] (x:"+this.x.toFixed(5)+", y:"+this.y.toFixed(5)+")"},n);function n(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}e.Point=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(Object.defineProperty(n.prototype,"red",{get:function(){return this._red},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"green",{get:function(){return this._green},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"blue",{get:function(){return this._blue},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"alpha",{get:function(){return this._alpha},enumerable:!0,configurable:!0}),Object.defineProperty(n,"RED",{get:function(){return new n(1,0,0,1)},enumerable:!0,configurable:!0}),n.prototype.toHexRGB=function(){var t=Math.floor(255*this._red),e=Math.floor(255*this._green),i=Math.floor(255*this._blue);return"#"+t.toString(16).padStart(2,"0")+e.toString(16).padStart(2,"0")+i.toString(16).padStart(2,"0")},n.prototype.toHexRGBA=function(){var t=Math.floor(255*this._red),e=Math.floor(255*this._green),i=Math.floor(255*this._blue),n=Math.floor(255*this._alpha);return"#"+t.toString(16).padStart(2,"0")+e.toString(16).padStart(2,"0")+i.toString(16).padStart(2,"0")+n.toString(16).padStart(2,"0")},n);function n(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),this._red=t,this._green=e,this._blue=i,this._alpha=n}e.Color=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(n.prototype.addEventListener=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate.addEventListener.apply(this._delegate,t)},n.prototype.dispatchEvent=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._delegate.dispatchEvent.apply(this._delegate,t)},n.prototype.removeEventListener=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._delegate.removeEventListener.apply(this._delegate,t)},n);function n(){this._delegate=document.createDocumentFragment()}e.EventDispatcher=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(n.deltaSeconds=0,n);function n(){}e.Timer=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(30),n=(o.fromTile=function(t){var e=new o(t.tileSet,t.tileX,t.tileY);return e.mapCode=t.mapCode,e.bounds=t.bounds,e},Object.defineProperty(o.prototype,"left",{get:function(){return(this.bounds&r.TileBounds.LEFT)==r.TileBounds.LEFT},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"bottom",{get:function(){return(this.bounds&r.TileBounds.BOTTOM)==r.TileBounds.BOTTOM},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"right",{get:function(){return(this.bounds&r.TileBounds.RIGHT)==r.TileBounds.RIGHT},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"top",{get:function(){return(this.bounds&r.TileBounds.TOP)==r.TileBounds.TOP},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tileSet",{get:function(){return this._tileSet},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tileX",{get:function(){return this._tileX},set:function(t){this._tileX=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tileY",{get:function(){return this._tileY},set:function(t){this.tileY=t},enumerable:!0,configurable:!0}),o.prototype.draw=function(t,e,i,n){this._tileSet.draw(this._tileX,this._tileY,t,e,i,n)},o.prototype.set=function(t,e,i,n,o){void 0===n&&(n=0),void 0===o&&(o=r.TileBounds.NONE),this._tileSet=t,this._tileX=e,this._tileY=i,this.mapCode=n,this.bounds=o},o.prototype.update=function(){},o);function o(t,e,i){void 0===e&&(e=1),void 0===i&&(i=1),this.bounds=r.TileBounds.NONE,this.mapCode=0,this._tileSet=t,this._tileX=e,this._tileY=i}e.Tile=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(22),n=(o.update=function(t){if(0<this._pendingTweens.length){for(var e=0;e<this._pendingTweens.length;++e)this._tweenList.push(this._pendingTweens[e]);this._pendingTweens.length=0}for(var i=0,n=this._removeList;i<n.length;i++){var o=n[i];this.removeTween(o,this._pendingTweens),this.removeTween(o,this._tweenList),a.Tween.pool.release(o)}if(this._removeList.length=0,this.isActive)for(var r=0,s=this._tweenList;r<s.length;r++)(o=s[r]).update(t)},o.create=function(t){var e=a.Tween.pool.get();return e.reset(),e.sprite=t,this._pendingTweens.push(e),e},o.remove=function(t){this._removeList.push(t)},o.removeTween=function(t,e){var i=e.indexOf(t);-1<i&&e.splice(i,1)},o._removeList=new Array,o._pendingTweens=new Array,o._tweenList=new Array,o.isActive=!0,o);function o(){}e.Tweener=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(n.add=function(t,e,i){void 0===i&&(i=!1),this._audioMap.get(t)||(e.loop=i,this._audioMap.set(t,e))},n.play=function(t){this._audioMap.has(t)&&this.isEnabled&&this._audioMap.get(t).play()},n.pause=function(t){this._audioMap.has(t)&&this._audioMap.get(t).pause()},n.pauseAll=function(){this._audioMap.forEach(function(t){t.pause()})},n.stop=function(t){this._audioMap.has(t)&&this._audioMap.get(t).stop()},n.stopAll=function(){this._audioMap.forEach(function(t){t.stop()})},n.resume=function(){this.isEnabled&&this._audioMap.forEach(function(t){t.isPlaying&&t.play()})},n._audioMap=new Map,n.isEnabled=!0,n);function n(){}e.AudioMixer=i},function(t,e){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),(i=e.AnchorType||(e.AnchorType={}))[i.NONE=0]="NONE",i[i.BOTTOM_CENTER=1]="BOTTOM_CENTER",i[i.BOTTOM_LEFT=2]="BOTTOM_LEFT",i[i.BOTTOM_RIGHT=3]="BOTTOM_RIGHT",i[i.CENTER=4]="CENTER",i[i.CENTER_LEFT=5]="CENTER_LEFT",i[i.CENTER_RIGHT=6]="CENTER_RIGHT",i[i.TOP_CENTER=7]="TOP_CENTER",i[i.TOP_LEFT=8]="TOP_LEFT",i[i.TOP_RIGHT=9]="TOP_RIGHT"},function(t,e){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),(i=e.EaseType||(e.EaseType={}))[i.LINEAR=0]="LINEAR",i[i.QUADRATIC_IN=1]="QUADRATIC_IN",i[i.QUADRATIC_OUT=2]="QUADRATIC_OUT",i[i.QUADRATIC_IN_OUT=3]="QUADRATIC_IN_OUT",i[i.CUBIC_IN=4]="CUBIC_IN",i[i.CUBIC_OUT=5]="CUBIC_OUT",i[i.CUBIC_IN_OUT=6]="CUBIC_IN_OUT",i[i.QUARTIC_IN=7]="QUARTIC_IN",i[i.QUARTIC_OUT=8]="QUARTIC_OUT",i[i.QUARTIC_IN_OUT=9]="QUARTIC_IN_OUT",i[i.QUINTIC_IN=10]="QUINTIC_IN",i[i.QUINTIC_OUT=11]="QUINTIC_OUT",i[i.QUINTIC_IN_OUT=12]="QUINTIC_IN_OUT",i[i.SINOSOIDAL_IN=13]="SINOSOIDAL_IN",i[i.SINOSOIDAL_OUT=14]="SINOSOIDAL_OUT",i[i.SINOSOIDAL_IN_OUT=15]="SINOSOIDAL_IN_OUT",i[i.EXPONENTIAL_IN=16]="EXPONENTIAL_IN",i[i.EXPONENTIAL_OUT=17]="EXPONENTIAL_OUT",i[i.EXPONENTIAL_IN_OUT=18]="EXPONENTIAL_IN_OUT",i[i.CIRCULAR_IN=19]="CIRCULAR_IN",i[i.CIRCULAR_OUT=20]="CIRCULAR_OUT",i[i.CIRCULAR_IN_OUT=21]="CIRCULAR_IN_OUT",i[i.ELASTIC_IN=22]="ELASTIC_IN",i[i.ELASTIC_OUT=23]="ELASTIC_OUT",i[i.ELASTIC_IN_OUT=24]="ELASTIC_IN_OUT",i[i.BACK_IN=25]="BACK_IN",i[i.BACK_OUT=26]="BACK_OUT",i[i.BACK_IN_OUT=27]="BACK_IN_OUT",i[i.BOUNCE_IN=28]="BOUNCE_IN",i[i.BOUNCE_OUT=29]="BOUNCE_OUT",i[i.BOUNCE_IN_OUT=30]="BOUNCE_IN_OUT"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),o=i(13),r=(Object.defineProperty(s,"IDENTITY",{get:function(){return new s},enumerable:!0,configurable:!0}),s.prototype.dispose=function(){this._scale.dispose(),this._rotation.dispose(),this._translation.dispose(),this._matrix.dispose(),this._scale=null,this._rotation=null,this._translation=null,this._matrix=null},s.prototype.setScale=function(t,e){this._scale.x=t,this._scale.y=e,this._isDirty=!0},s.prototype.setTranslate=function(t,e){this._translation.x=t,this._translation.y=e,this._isDirty=!0},s.prototype.setRotate=function(t){var e=Math.cos(t),i=Math.sin(t);this._rotation.set(e,-i,0,i,e,0,0,0,1),this._isDirty=!0},Object.defineProperty(s.prototype,"scaleX",{get:function(){return this._scale.x},set:function(t){this._scale.x=t,this._isDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"scaleY",{get:function(){return this._scale.y},set:function(t){this._scale.y=t,this._isDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"scale",{get:function(){return this._scale},set:function(t){this._scale=t,this._isDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation=t,this._isDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"translation",{get:function(){return this._translation},set:function(t){this._translation=t,this._isDirty=!0},enumerable:!0,configurable:!0}),s.multiply=function(t,e){var i=o.Matrix.multiply(t.matrix,e.matrix),n=new s;return n.matrix=i,n},Object.defineProperty(s.prototype,"matrix",{get:function(){return this._isDirty&&(this._matrix.compose(this._scale,this._rotation,this._translation),this._isDirty=!1),this._matrix},set:function(t){this._matrix=t,this._matrix.decompose(this._scale,this._rotation,this._translation),this._isDirty=!1},enumerable:!0,configurable:!0}),s);function s(){this._scale=n.Point.ONE,this._rotation=o.Matrix.IDENTITY,this._translation=n.Point.ZERO,this._matrix=o.Matrix.IDENTITY,this._isDirty=!0}e.Transform=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),o=(Object.defineProperty(r,"IDENTITY",{get:function(){return new r(1,0,0,0,1,0,0,0,1)},enumerable:!0,configurable:!0}),Object.defineProperty(r,"ZERO",{get:function(){return new r(0,0,0,0,0,0,0,0,0)},enumerable:!0,configurable:!0}),r.prototype.dispose=function(){},Object.defineProperty(r.prototype,"euler",{get:function(){return Math.atan2(-this.m01,this.m00)},enumerable:!0,configurable:!0}),r.rotation=function(t){var e=Math.cos(t),i=Math.sin(t);return new r(e,-i,0,i,e,0,0,0,1)},r.scale=function(t,e){return new r(t,0,0,0,e,0,0,0,1)},r.translation=function(t,e){return new r(1,0,t,0,1,e,0,0,1)},r.multiply=function(t,e){return new r(t.m00*e.m00+t.m01*e.m10+t.m02*e.m20,t.m00*e.m01+t.m01*e.m11+t.m02*e.m21,t.m00*e.m02+t.m01*e.m12+t.m02*e.m22,t.m10*e.m00+t.m11*e.m10+t.m12*e.m20,t.m10*e.m01+t.m11*e.m11+t.m12*e.m21,t.m10*e.m02+t.m11*e.m12+t.m12*e.m22,t.m20*e.m00+t.m21*e.m10+t.m22*e.m20,t.m20*e.m01+t.m21*e.m11+t.m22*e.m21,t.m20*e.m02+t.m21*e.m12+t.m22*e.m22)},r.multiplyPoint=function(t,e){return new n.Point(t.m00*e.x+t.m01*e.y+t.m02,t.m10*e.x+t.m11*e.y+t.m12)},r.prototype.compose=function(t,e,i){var n=r.scale(t.x,t.y),o=r.multiply(n,e);this.set(o.m00,o.m01,i.x,o.m10,o.m11,i.y,0,0,1)},r.prototype.decompose=function(t,e,i){i.set(this.m02,this.m12);var n=Math.sqrt(this.m00*this.m00+this.m01*this.m01),o=Math.sqrt(this.m10*this.m10+this.m11*this.m11);t.set(n,o),e.set(this.m00/n,this.m01/n,0,this.m10/o,this.m11/o,0,0,0,1)},r.prototype.set=function(t,e,i,n,o,r,s,a,u){this.m00=t,this.m01=e,this.m02=i,this.m10=n,this.m11=o,this.m12=r,this.m20=s,this.m21=a,this.m22=u},r.prototype.copyFrom=function(t){this.m00=t.m00,this.m01=t.m01,this.m02=t.m02,this.m10=t.m10,this.m11=t.m11,this.m12=t.m12,this.m20=t.m20,this.m21=t.m21,this.m22=t.m22},r.prototype.toIdentity=function(){this.set(1,0,0,0,1,0,0,0,1)},r.prototype.toZero=function(){this.set(0,0,0,0,0,0,0,0,0)},r.prototype.toString=function(){return"[Matrix]\n m00: "+this.m00.toPrecision(8)+", m01: "+this.m01.toPrecision(8)+", m02: "+this.m02.toPrecision(8)+"\n m10: "+this.m10.toPrecision(8)+", m11: "+this.m11.toPrecision(8)+", m12: "+this.m12.toPrecision(8)+"\n m20: "+this.m20.toPrecision(8)+", m21: "+this.m21.toPrecision(8)+", m22: "+this.m22.toPrecision(8)},r);function r(t,e,i,n,o,r,s,a,u){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=1),void 0===r&&(r=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===u&&(u=1),this.m00=t,this.m01=e,this.m02=i,this.m10=n,this.m11=o,this.m12=r,this.m20=s,this.m21=a,this.m22=u}e.Matrix=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(12),o=i(3),r=i(13),s=i(25),a=(Object.defineProperty(u,"IDENTITY",{get:function(){return new u([o.Point.ZERO,o.Point.ZERO,o.Point.ONE,o.Point.ONE])},enumerable:!0,configurable:!0}),Object.defineProperty(u,"ZERO",{get:function(){return new u([o.Point.ZERO,o.Point.ZERO,o.Point.ZERO,o.Point.ZERO])},enumerable:!0,configurable:!0}),u.prototype.dispose=function(){for(var t=0,e=this._vertices;t<e.length;t++){var i=e[t];i.dispose(),i=null}this._transform.dispose(),this._transform=null},u.transform=function(t,e){for(var i=new Array(4),n=0;n<4;++n)i[n]=r.Matrix.multiplyPoint(e.matrix,t._vertices[n]);return new u(i)},u.prototype.set=function(t,e,i,n){this._vertices[0].x=t,this._vertices[0].y=e,this._vertices[1].x=t+i,this._vertices[1].y=e,this._vertices[2].x=t+i,this._vertices[2].y=e+n,this._vertices[3].x=t,this._vertices[3].y=e+n,this._isAABBDirty=!0},Object.defineProperty(u.prototype,"aabb",{get:function(){if(!this._isAABBDirty)return this._aabb;for(var t=Number.MAX_VALUE,e=-Number.MAX_VALUE,i=Number.MAX_VALUE,n=-Number.MAX_VALUE,o=0;o<this._vertices.length;++o)this._vertices[o].x<t&&(t=this._vertices[o].x),this._vertices[o].x>e&&(e=this._vertices[o].x),this._vertices[o].y<i&&(i=this._vertices[o].y),this._vertices[o].y>n&&(n=this._vertices[o].y);return this._aabb.set(t,i,e-t,n-i),this._aabb},enumerable:!0,configurable:!0}),u);function u(t){this._transform=n.Transform.IDENTITY,this._aabb=new s.Rectangle,this._vertices=[o.Point.ZERO,o.Point.ZERO,o.Point.ZERO,o.Point.ZERO],this._transform=n.Transform.IDENTITY,this._vertices=t,this._isAABBDirty=!0}e.Bound=a},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=i(2),a=i(29),u=i(1),c=(r=s.Container,o(h,r),h.prototype.loadScene=function(t){this.application.loadScene(t)},h.prototype.addEventListeners=function(){var e=this;this.assets.addEventListener(u.EventType.COMPLETE,function(t){return e.onAssetsComplete(t)}),this.assets.addEventListener(u.EventType.TIMEOUT,function(t){return e.onAssetsError(t)}),this.assets.addEventListener(u.EventType.ERROR,function(t){return e.onAssetsError(t)})},h.prototype.removeEventListeners=function(){var e=this;this.assets.removeEventListener(u.EventType.COMPLETE,function(t){return e.onAssetsComplete(t)}),this.assets.removeEventListener(u.EventType.TIMEOUT,function(t){return e.onAssetsError(t)}),this.assets.removeEventListener(u.EventType.ERROR,function(t){return e.onAssetsError(t)})},h);function h(){var t=r.call(this)||this;return t.assets=new a.AssetLoader,t.update(),t}e.Scene=c},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,u=i(0),s=i(1),a=i(5),c=(r=a.EventDispatcher,o(h,r),Object.defineProperty(h.prototype,"image",{get:function(){return this._image},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"width",{get:function(){return this._image.width},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"height",{get:function(){return this._image.height},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"path",{get:function(){return this._image.src},set:function(t){null==t&&(t=""),this._image.src=t},enumerable:!0,configurable:!0}),h.prototype.onImageLoad=function(){this.dispatchEvent(new Event(s.EventType.LOADED))},h.prototype.onImageError=function(){this._image.src="",this.dispatchEvent(new CustomEvent(s.EventType.ERROR))},h.prototype.draw=function(t,e,i,n,o,r,s,a){null!=o&&null!=r&&null!=s&&null!=a&&null!=i&&null!=n?u.Stage.context.drawImage(this._image,o,r,s,a,t,e,i,n):null!=i&&null!=n?u.Stage.context.drawImage(this._image,t,e,i,n):u.Stage.context.drawImage(this._image,t,e)},h);function h(t){void 0===t&&(t=null);var e=r.call(this)||this;return e._image=t||document.createElement("img"),e._image.onload=function(t){return e.onImageLoad(t)},e._image.onerror=function(t){return e.onImageError(t)},e}e.Texture=c},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=i(18),a=i(3),u=i(2),c=i(0),h=i(10),p=i(16),l=i(14),_=(r=u.Container,o(f,r),Object.defineProperty(f.prototype,"targetContext",{get:function(){return this._targetContext},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"targetCanvas",{get:function(){return this._targetCanvas},enumerable:!0,configurable:!0}),f.prototype.dispose=function(){},Object.defineProperty(f.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._targetCanvas.width=t.width,this.canvas.width=t.width,this._targetCanvas.height=t.height,this.canvas.height=t.height,this._width=t.width,this._height=t.height,this._isDirty=!0},enumerable:!0,configurable:!0}),f.prototype.update=function(t){void 0===t&&(t=!0),r.prototype.update.call(this,t)},f.prototype.updateModelBound=function(){this._modelBound.set(-this.pivot.x,-this.pivot.y,this._targetCanvas.width,this._targetCanvas.height)},f.prototype.updateWorldBound=function(){this._worldBound=l.Bound.transform(this._modelBound,this.worldTransform)},f.prototype.draw=function(){if(!(this.alpha<Number.EPSILON)){this._isDirty&&(this.redraw(),this.updateModelSpace());var t=c.Stage.context,e=this.worldTransform.matrix;t.globalAlpha=this.alpha,t.imageSmoothingEnabled=this.smoothing,t.globalCompositeOperation=this.blendMode,t.setTransform(e.m00,e.m10,e.m01,e.m11,e.m02,e.m12);var i=this._targetContext;i.globalAlpha=this.alpha,t.drawImage(i.canvas,-this.pivot.x,-this.pivot.y),r.prototype.draw.call(this)}},f.prototype.drawDebug=function(){var t=c.Stage.context;t.globalCompositeOperation=s.BlendMode.SOURCE_OVER,t.imageSmoothingEnabled=!0,t.globalAlpha=1;var e=this.worldTransform.matrix;t.setTransform(e.m00,e.m10,e.m01,e.m11,e.m02,e.m12),t.strokeStyle="#0F0",t.lineWidth=.3,t.strokeRect(this._modelBound.aabb.x,this._modelBound.aabb.y,this._modelBound.aabb.width,this._modelBound.aabb.height),t.resetTransform(),t.strokeStyle="#F00",t.lineWidth=1,t.strokeRect(this._worldBound.aabb.x,this._worldBound.aabb.y,this._worldBound.aabb.width,this._worldBound.aabb.height),r.prototype.drawDebug.call(this)},f.prototype.redraw=function(){var t=this._targetContext;t.clearRect(0,0,this._width,this._height),t.globalAlpha=1,t.imageSmoothingEnabled=this.smoothing,t.globalCompositeOperation=this.blendMode,t.drawImage(this.graphics.canvas,0,0,this._width,this._height),""==this._texture.image.src&&null==this._texture.image.src||t.drawImage(this._texture.image,0,0,this._width,this._height),null!=this._tint&&(t.globalAlpha=1,t.globalCompositeOperation=s.BlendMode.SOURCE_ATOP,t.fillStyle=this._tint.toHexRGBA(),t.fillRect(0,0,this._width,this._height)),""==this._mask.src&&null==this._mask.src||(t.globalAlpha=1,t.globalCompositeOperation=s.BlendMode.DESTINATION_IN,t.drawImage(this._mask,0,0,this._width,this._height)),this._isDirty=!1},Object.defineProperty(f.prototype,"mask",{set:function(t){this._mask.src=t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._isDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"width",{get:function(){return this._worldBound.aabb.width},set:function(t){this.scaleX=t/this._targetCanvas.width},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"height",{get:function(){return this._worldBound.aabb.height},set:function(t){this.scaleY=t/this._targetCanvas.height},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"left",{get:function(){return this._worldBound.aabb.x},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"right",{get:function(){return this.left+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"top",{get:function(){return this._worldBound.aabb.y},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"bottom",{get:function(){return this.top+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"center",{get:function(){return new a.Point((this.left+this.width)/2,(this.top+this.height)/2)},enumerable:!0,configurable:!0}),f.prototype.intersectsXY=function(t,e){return!(this.bottom<e||this.top>e||this.right<t||this.left>t)},f.prototype.intersectsPoint=function(t){return this.intersectsXY(t.x,t.y)},f.prototype.intersects=function(t){return!(this.bottom<t.top||this.top>t.bottom||this.right<t.left||this.left>t.right)},f.prototype.intersectsRectangle=function(t){return!(this.bottom<t.top)&&!(this.top>t.bottom)&&!(this.right<t.left)&&!(this.left>t.right)&&void 0},f.prototype.intersectsRadiusAdvanced=function(t,e,i,n){var o=this.center,r=t.center,s=r.x-o.x,a=r.y-o.y,u=e+i;return a*a+s*s-(u*=u)<=n*n},f.prototype.intersectsRadius=function(t,e){return e?this.intersectsRadiusAdvanced(t,e,e,0):this.intersectsRadiusAdvanced(t,(this.width+this.height)/4,(t.width+t.height)/4,0)},Object.defineProperty(f.prototype,"anchorType",{set:function(t){var e=this._width,i=this._height,n=this._width/2,o=this._height/2;switch(t){case h.AnchorType.TOP_LEFT:this.pivot.set(0,0);break;case h.AnchorType.TOP_CENTER:this.pivot.set(n,0);break;case h.AnchorType.TOP_RIGHT:this.pivot.set(e,0);break;case h.AnchorType.CENTER_LEFT:this.pivot.set(0,o);break;case h.AnchorType.CENTER:this.pivot.set(n,o);break;case h.AnchorType.CENTER_RIGHT:this.pivot.set(e,o);break;case h.AnchorType.BOTTOM_LEFT:this.pivot.set(0,i);break;case h.AnchorType.BOTTOM_CENTER:this.pivot.set(n,i);break;case h.AnchorType.BOTTOM_RIGHT:this.pivot.set(e,i)}},enumerable:!0,configurable:!0}),f);function f(t){var e=r.call(this)||this;return e.alpha=1,e.smoothing=!0,e.blendMode=s.BlendMode.SOURCE_OVER,e.pivot=a.Point.ZERO,e._modelBound=l.Bound.ZERO,e._isDirty=!0,e._targetCanvas=document.createElement("canvas"),e._targetContext=e._targetCanvas.getContext("2d"),e.canvas=document.createElement("canvas"),e.graphics=e.canvas.getContext("2d"),t?e.texture=t:e._texture=new p.Texture,e._mask=document.createElement("img"),e._mask.onload=function(){e._isDirty=!0},e._mask.onerror=function(){e._mask.src=""},e}e.Sprite=_},function(t,e){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),(i=e.BlendMode||(e.BlendMode={})).SOURCE_OVER="source-over",i.SOURCE_IN="source-in",i.SOURCE_OUT="source-out",i.SOURCE_ATOP="source-atop",i.DESTINATION_OVER="destination-over",i.DESTINATION_IN="destination-in",i.DESTINATION_OUT="destination-out",i.DESTINATION_ATOP="destination-atop",i.LIGHTER="lighter",i.COPY="copy",i.XOR="xor",i.MULTIPLY="multiply",i.SCREEN="screen",i.OVERLAY="overlay",i.DARKEN="darken",i.LIGHTEN="lighten",i.COLOR_DODGE="color-dodge",i.COLOR_BURN="color-burn",i.HARD_LIGHT="hard-light",i.SOFT_LIGHT="soft-light",i.DIFFERENCE="difference",i.EXCLUSION="exclusion",i.HUE="hue",i.SATURATION="saturation",i.COLOR="color",i.LUMINOSITY="luminosity"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(7),o=(Object.defineProperty(r.prototype,"tileWidth",{get:function(){return this._tileWidth},set:function(t){this._tileWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"tileHeight",{get:function(){return this._tileHeight},set:function(t){this._tileHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"numTilesX",{get:function(){return this._texture.width/this._tileWidth},set:function(t){this._tileWidth=this._texture.width/t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"numTilesY",{get:function(){return this._texture.height/this._tileHeight},set:function(t){this._tileHeight=this._texture.height/t},enumerable:!0,configurable:!0}),r.prototype.getTile=function(t,e){return new n.Tile(this,t,e)},r.prototype.getTileAt=function(t){var e=this.numTilesX,i=t%e;return new n.Tile(this,i,(t-i)/e)},r.prototype.draw=function(t,e,i,n,o,r){var s=t*this._tileWidth,a=e*this._tileHeight;this._texture.draw(i,n,o,r,s,a,this._tileWidth,this._tileHeight)},r);function r(t,e,i){this._tileWidth=-1,this._tileHeight=-1,this._texture=t,e&&i?(this._tileWidth=e,this._tileHeight=i):(this._tileWidth=t.width,this._tileHeight=t.height)}e.TileSet=o},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(n.BUNNY_PATH="./assets/bunny.png",n.STAR_PATH="./assets/star.png",n.ICE_SET_PATH="./assets/ice_set.png",n.MAP_DATA_PATH="./assets/map_data.json",n.AUDIO_TEST="./assets/audio.mp3",n.BUTTON_UP="./assets/button_up.png",n.BUTTON_DOWN="./assets/button_down.png",n);function n(){}e.Assets=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4),o=i(0),r=i(26);o.Stage.init(800,600,new n.Color(.3,.6,.9),30,!0);new r.Game},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=i(11),a=i(1),u=i(8),c=i(23),h=i(5),p=(r=h.EventDispatcher,o(l,r),Object.defineProperty(l,"pool",{get:function(){return this._pool},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"isPlaying",{get:function(){return this._isPlaying},set:function(t){this._isPlaying=t},enumerable:!0,configurable:!0}),l.prototype.reset=function(){this._startX=0,this._destinationX=0,this._startY=0,this._destinationY=0,this._startAlpha=0,this._destinationAlpha=0,this._startScaleX=0,this._destinationScaleX=0,this._startScaleY=0,this._destinationScaleY=0,this._startRotation=0,this._destinationRotation=0,this._isPlaying=!1,this._time=0,this._targetTime=0,this._easeType=s.EaseType.LINEAR,this.setEaseFunction()},l.prototype.start=function(){0==this._isPlaying&&(this.dispatchEvent(new Event(a.EventType.STARTED)),this._isPlaying=!0)},Object.defineProperty(l.prototype,"easeType",{get:function(){return this._easeType},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"sprite",{get:function(){return this._sprite},set:function(t){this._sprite=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"startX",{get:function(){return this._startX},set:function(t){this._startX=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"startY",{get:function(){return this._startY},set:function(t){this._startY=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"destinationX",{get:function(){return this._destinationX},set:function(t){this._destinationX=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"startAlpha",{get:function(){return this._startAlpha},set:function(t){this._startAlpha=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"destinationAlpha",{get:function(){return this._destinationAlpha},set:function(t){this._destinationAlpha=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"startScaleX",{get:function(){return this._startScaleX},set:function(t){this._startScaleX=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"startScaleY",{get:function(){return this._startScaleY},set:function(t){this._startScaleY=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"destinationScaleX",{get:function(){return this._destinationScaleX},set:function(t){this._destinationScaleX=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"destinationScaleY",{get:function(){return this._destinationScaleY},set:function(t){this._destinationScaleY=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"startRotation",{get:function(){return this._startRotation},set:function(t){this._startRotation=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"destinationRotation",{get:function(){return this._destinationRotation},set:function(t){this._destinationRotation=t},enumerable:!0,configurable:!0}),l.prototype.duration=function(t){return this._targetTime=t,this},l.prototype.scale=function(t,e,i,n){return this._startScaleX=t,this._destinationScaleX=e,this._startScaleY=i,this._destinationScaleY=n,this},l.prototype.rotate=function(t,e){return this._startRotation=t,this._destinationRotation=e,this},l.prototype.translate=function(t,e,i,n){return this._startX=t,this._destinationX=e,this._startY=i,this._destinationY=n,this},l.prototype.alpha=function(t,e){return this._startAlpha=t,this._destinationAlpha=e,this},l.prototype.easing=function(t){return this._easeType=t,this.setEaseFunction(),this},l.prototype.setEaseFunction=function(){switch(this._easeType){case s.EaseType.BACK_IN:this._easeFunction=this.backIn;break;case s.EaseType.BACK_IN_OUT:this._easeFunction=this.backInOut;break;case s.EaseType.BACK_OUT:this._easeFunction=this.backOut;break;case s.EaseType.BOUNCE_IN:this._easeFunction=this.bounceIn;break;case s.EaseType.BOUNCE_IN_OUT:this._easeFunction=this.bounceInOut;break;case s.EaseType.BOUNCE_OUT:this._easeFunction=this.bounceOut;break;case s.EaseType.CIRCULAR_IN:this._easeFunction=this.circularIn;break;case s.EaseType.CIRCULAR_IN_OUT:this._easeFunction=this.circularInOut;break;case s.EaseType.CIRCULAR_OUT:this._easeFunction=this.circularOut;break;case s.EaseType.CUBIC_IN:this._easeFunction=this.cubicIn;break;case s.EaseType.CUBIC_IN_OUT:this._easeFunction=this.cubicInOut;break;case s.EaseType.CUBIC_OUT:this._easeFunction=this.cubicOut;break;case s.EaseType.ELASTIC_IN:this._easeFunction=this.elasticIn;break;case s.EaseType.ELASTIC_IN_OUT:this._easeFunction=this.elasticInOut;break;case s.EaseType.ELASTIC_OUT:this._easeFunction=this.elasticOut;break;case s.EaseType.EXPONENTIAL_IN:this._easeFunction=this.exponentialIn;break;case s.EaseType.EXPONENTIAL_IN_OUT:this._easeFunction=this.exponentialInOut;break;case s.EaseType.EXPONENTIAL_OUT:this._easeFunction=this.exponentialOut;break;case s.EaseType.LINEAR:this._easeFunction=this.linear;break;case s.EaseType.QUADRATIC_IN:this._easeFunction=this.quadraticIn;break;case s.EaseType.QUADRATIC_IN_OUT:this._easeFunction=this.quadraticInOut;break;case s.EaseType.QUADRATIC_OUT:this._easeFunction=this.quadraticOut;break;case s.EaseType.QUARTIC_IN:this._easeFunction=this.quarticIn;break;case s.EaseType.QUARTIC_IN_OUT:this._easeFunction=this.quarticInOut;break;case s.EaseType.QUARTIC_OUT:this._easeFunction=this.quarticOut;break;case s.EaseType.QUINTIC_IN_OUT:this._easeFunction=this.quinticInOut;break;case s.EaseType.QUINTIC_OUT:this._easeFunction=this.quinticOut;break;case s.EaseType.SINOSOIDAL_IN:this._easeFunction=this.sinusoidalIn;break;case s.EaseType.SINOSOIDAL_IN_OUT:this._easeFunction=this.sinusoidalInOut;break;case s.EaseType.SINOSOIDAL_OUT:this._easeFunction=this.sinusoidalOut}},l.prototype.update=function(t){if(this._isPlaying){this._time+=t;var e=this._time/this._targetTime;1<e?e=1:e<0&&(e=0),null!=this._sprite&&(this._startX!=this._destinationX&&(this._sprite.x=this.interpolateLinearFunc(this._startX,this._destinationX,this._easeFunction(e))),this._startY!=this._destinationY&&(this._sprite.y=this.interpolateLinearFunc(this._startY,this._destinationY,this._easeFunction(e))),this._startAlpha!=this._destinationAlpha&&(this._sprite.alpha=this.interpolateLinearFunc(this._startAlpha,this._destinationAlpha,this._easeFunction(e))),this._startScaleX!=this._destinationScaleX&&(this._sprite.scaleX=this.interpolateLinearFunc(this._startScaleX,this._destinationScaleX,this._easeFunction(e))),this._startScaleY!=this._destinationScaleY&&(this._sprite.scaleY=this.interpolateLinearFunc(this._startScaleY,this._destinationScaleY,this._easeFunction(e))),this._startRotation!=this._destinationRotation&&(this._sprite.rotation=this.interpolateLinearFunc(this._startRotation,this._destinationRotation,this._easeFunction(e)))),this._time>=this._targetTime&&(this.dispatchEvent(new Event(a.EventType.COMPLETE)),u.Tweener.remove(this))}},l.prototype.linear=function(t){return t},l.prototype.quadraticIn=function(t){return t*t},l.prototype.quadraticOut=function(t){return t*(2-t)},l.prototype.quadraticInOut=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},l.prototype.cubicIn=function(t){return t*t*t},l.prototype.cubicOut=function(t){return--t*t*t+1},l.prototype.cubicInOut=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},l.prototype.quarticIn=function(t){return t*t*t*t},l.prototype.quarticOut=function(t){return 1- --t*t*t*t},l.prototype.quarticInOut=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},l.prototype.quninticIn=function(t){return t*t*t*t*t},l.prototype.quinticOut=function(t){return--t*t*t*t*t+1},l.prototype.quinticInOut=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},l.prototype.sinusoidalIn=function(t){return 1-Math.cos(t*Math.PI/2)},l.prototype.sinusoidalOut=function(t){return Math.sin(t*Math.PI/2)},l.prototype.sinusoidalInOut=function(t){return.5*(1-Math.cos(Math.PI*t))},l.prototype.exponentialIn=function(t){return 0==t?0:Math.pow(1024,t-1)},l.prototype.exponentialOut=function(t){return 1==t?1:1-Math.pow(2,-10*t)},l.prototype.exponentialInOut=function(t){return 0==t?0:1==t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},l.prototype.circularIn=function(t){return 1-Math.sqrt(1-t*t)},l.prototype.circularOut=function(t){return Math.sqrt(1- --t*t)},l.prototype.circularInOut=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},l.prototype.elasticIn=function(t){return 0==t?0:1==t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},l.prototype.elasticOut=function(t){return 0==t?0:1==t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},l.prototype.elasticInOut=function(t){return 0==t?0:1==t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1},l.prototype.backIn=function(t){return t*t*(2.70158*t-1.70158)},l.prototype.backOut=function(t){return--t*t*(2.70158*t+1.70158)+1},l.prototype.backInOut=function(t){var e=2.5949095;return(t*=2)<1?t*t*((1+e)*t-e)*.5:.5*((t-=2)*t*((1+e)*t+e)+2)},l.prototype.bounceIn=function(t){return 1-this.bounceOut(1-t)},l.prototype.bounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},l.prototype.bounceInOut=function(t){return t<.5?.5*this.bounceIn(2*t):.5*this.bounceOut(2*t-1)+.5},l.prototype.interpolateLinearFunc=function(t,e,i){return(e-t)*i+t},l._pool=new c.Pool(10,l),l);function l(){var t=null!==r&&r.apply(this,arguments)||this;return t._isPlaying=!1,t._easeType=s.EaseType.LINEAR,t}e.Tween=p},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(n.prototype.expand=function(t){var e;for(void 0===t&&(t=10),e=0;e<t;++e){var i=new this.type;this._released.push(i)}this._pool.length,this._released.length},n.prototype.get=function(){0==this._released.length&&this._released.push(new this.type);var t=this._released.shift();return this._pool.push(t),t},n.prototype.release=function(t){var e=this._pool.indexOf(t);-1<e&&(this._pool.splice(e,1),this._released.push(t))},n.prototype.clear=function(){for(var t=0,e=this._pool;t<e.length;t++){var i=e[t];this.release(i)}this._pool.length=0,this._released.length=0},Object.defineProperty(n.prototype,"numReleased",{get:function(){return this._released.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"numActive",{get:function(){return this._pool.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"active",{get:function(){return this._pool},enumerable:!0,configurable:!0}),n);function n(t,e){this.type=e,this._released=new Array,this._pool=new Array,this.expand(t)}e.Pool=i},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=i(12),a=i(14),u=i(3),c=i(6),h=i(5),p=(r=h.EventDispatcher,o(l,r),l.prototype.updateWorldData=function(){this._worldTransformIsDirty&&(this.transform.setTranslate(this._x,this._y),this.transform.setScale(this._scaleX,this._scaleY),this.transform.setRotate(this._rotation),null!=this._parent?this.worldTransform=s.Transform.multiply(this._parent.worldTransform,this.transform):this.worldTransform=this.transform)},l.prototype.dispose=function(){this.transform.dispose(),this.worldTransform.dispose(),this._worldBound.dispose(),this.transform=null,this.worldTransform=null,this._worldBound=null},Object.defineProperty(l.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._worldTransformIsDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._worldTransformIsDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"scaleX",{get:function(){return this._scaleX},set:function(t){this._scaleX=t,this._worldTransformIsDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"scaleY",{get:function(){return this._scaleY},set:function(t){this._scaleY=t,this._worldTransformIsDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation=t,this._worldTransformIsDirty=!0},enumerable:!0,configurable:!0}),l.prototype.rotate=function(t){this.rotation+=t},l.prototype.translate=function(t,e){this.x+=t,this.y+=e},Object.defineProperty(l.prototype,"scale",{set:function(t){this.scaleX*=t,this.scaleY*=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"parent",{get:function(){return this._parent},set:function(t){this._parent=t},enumerable:!0,configurable:!0}),l.prototype.update=function(t){void 0===t&&(t=!0);var e=c.Timer.deltaSeconds;this.velocity.isZero||(this.x+=this.velocity.x*e,this.y+=this.velocity.y*e),0!=this.rotationSpeed&&(this.rotation+=this.rotationSpeed*e),this.updateWorldData(),this.updateWorldBound(),t&&this.propagateBoundToRoot()},l.prototype.updateModelSpace=function(){this.updateModelBound()},l.prototype.updateModelBound=function(){},l.prototype.updateWorldBound=function(){},l.prototype.propagateBoundToRoot=function(){null!=this._parent&&(this._parent.updateWorldBound(),this._parent.propagateBoundToRoot())},l.prototype.draw=function(){},l.prototype.drawDebug=function(){},l);function l(){var t=null!==r&&r.apply(this,arguments)||this;return t.name="",t.transform=s.Transform.IDENTITY,t.worldTransform=s.Transform.IDENTITY,t._worldBoundIsDirty=!0,t._worldTransformIsDirty=!0,t._parent=null,t._worldBound=a.Bound.IDENTITY,t.velocity=u.Point.ZERO,t.rotationSpeed=0,t._x=0,t._y=0,t._scaleX=1,t._scaleY=1,t._rotation=0,t}e.Spatial=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),o=(r.prototype.dispose=function(){},Object.defineProperty(r.prototype,"position",{get:function(){return new n.Point(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"size",{get:function(){return new n.Point(this.width,this.height)},set:function(t){this.width=t.x,this.height=t.y},enumerable:!0,configurable:!0}),r.prototype.set=function(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n},r.prototype.growToContain=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),o=Math.max(this.y+this.height,t.y+t.height);this.x=e,this.y=n,this.width=i-e,this.height=o-n},r.transformBy=function(t,e){var i=new r(e.x,e.y,e.width,e.height);return i.x+=t.translation.x,i.y+=t.translation.y,i.width*=t.scaleX,i.height*=t.scaleY,i},r.prototype.hitTest=function(t){return!(t.x<this.x||t.y<this.y||t.x>this.x+this.width||t.y>this.y+this.height)},Object.defineProperty(r.prototype,"top",{get:function(){return this.y},set:function(t){this.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"left",{get:function(){return this.x},set:function(t){this.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},set:function(t){this.x=t-this.width},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){this.y=t-this.height},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"topLeft",{get:function(){return new n.Point(this.x,this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"topRight",{get:function(){return new n.Point(this.x+this.width,this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottomLeft",{get:function(){return new n.Point(this.x,this.y+this.height)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottomRight",{get:function(){return new n.Point(this.x+this.width,this.y+this.height)},enumerable:!0,configurable:!0}),r.prototype.fromPoints=function(t){for(var e=Number.MAX_VALUE,i=-Number.MAX_VALUE,n=Number.MAX_VALUE,o=-Number.MAX_VALUE,r=0,s=t;r<s.length;r++){var a=s[r];a.x<e&&(e=a.x),a.y<n&&(n=a.y),a.x>i&&(i=a.x),a.y>o&&(o=a.y)}this.x=e,this.y=n,this.width=i-e,this.height=o-n},r.prototype.toString=function(){return"[Rectangle]\nX: "+this.x.toFixed(5)+", Y: "+this.y.toFixed(5)+", Width: "+this.width.toFixed(5)+", Height: "+this.height.toFixed(5)},r);function r(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.width=i,this.height=n}e.Rectangle=o},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=i(27),a=i(28),u=(r=s.Application,o(c,r),c);function c(){var t=r.call(this)||this;return t.loadScene(new a.SplashScene),t}e.Game=u},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=i(0),a=i(2),u=(r=a.Container,o(c,r),Object.defineProperty(c.prototype,"isPaused",{get:function(){return s.Stage.instance.isPaused},enumerable:!0,configurable:!0}),c.prototype.pause=function(){s.Stage.instance.pause()},c.prototype.play=function(){s.Stage.instance.play()},c.prototype.loadScene=function(t){null!=this._currentScreen&&(this._currentScreen.assets.clear(),this._currentScreen.removeEventListeners(),this._currentScreen.application=null,this.removeAllChildren()),this._currentScreen=t,(this._currentScreen.application=this).addChild(this._currentScreen),this._currentScreen.addEventListeners(),this._currentScreen.init(),this._currentScreen.assets.load()},c);function c(){var t=r.call(this)||this;return s.Stage.instance.root=t}e.Application=u},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=i(15),a=i(20),u=i(1),c=i(32),h=i(9),p=i(4),l=i(33),_=(r=s.Scene,o(f,r),f.prototype.init=function(){this.assets.add(a.Assets.BUTTON_DOWN),this.assets.add(a.Assets.BUTTON_UP)},f.prototype.onAssetsComplete=function(){this.createScene()},f.prototype.onAssetsError=function(){},f.prototype.createScene=function(){var e=this,t=this.assets.getSprite(a.Assets.BUTTON_UP),i=this.assets.getSprite(a.Assets.BUTTON_UP);i.tint=new p.Color(1,0,0,.2);var n=this.assets.getSprite(a.Assets.BUTTON_DOWN),o=new c.Button(t,i,n);o.addEventListener(u.EventType.CLICK,function(t){return e.onButtonClick(t)}),o.x=400,o.y=500,o.scale=.4,this.addChild(o)},f.prototype.onButtonClick=function(){h.AudioMixer.play(a.Assets.AUDIO_TEST),this.loadScene(new l.GameScene)},f);function f(){return null!==r&&r.apply(this,arguments)||this}e.SplashScene=_},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=i(5),h=i(1),a=i(16),u=i(17),c=i(19),p=i(31),l=(r=s.EventDispatcher,o(_,r),_.prototype.add=function(t){this._paths.unshift(t)},_.prototype.clear=function(){this.paths.length=0,this._imageMap.clear(),this._audioMap.clear(),this._jsonMap.clear()},Object.defineProperty(_.prototype,"paths",{get:function(){return this._paths},enumerable:!0,configurable:!0}),_.prototype.getImage=function(t){return this._imageMap.get(t)},_.prototype.getTexture=function(t){return new a.Texture(this._imageMap.get(t))},_.prototype.getSprite=function(t){return new u.Sprite(this.getTexture(t))},_.prototype.getTileSet=function(t,e,i){return new c.TileSet(this.getTexture(t),e,i)},_.prototype.getAudio=function(t){return this._audioMap.get(t)},_.prototype.getAudioClip=function(t){return new p.AudioClip(this.getAudio(t))},_.prototype.getJson=function(t){return this._jsonMap.get(t)},_.prototype.load=function(){this.loadItem(this._paths.shift())},_.prototype.loadItem=function(e){var i=this,t=new XMLHttpRequest;switch(this.getFileExtension(e)){case"json":t.responseType="text";break;default:t.responseType="arraybuffer"}t.onload=function(t){return i.onAssetLoad(t,e)},t.onerror=function(t){return i.onAssetError(t,e)},t.ontimeout=function(t){return i.onAssetTimeout(t,e)},t.open("GET",e,!0),t.send()},_.prototype.onAssetError=function(){this.dispatchEvent(new Event(h.EventType.ERROR))},_.prototype.onAssetTimeout=function(){this.dispatchEvent(new Event(h.EventType.TIMEOUT))},_.prototype.onAssetLoad=function(t,e){var i=t.target;if(200==i.status){var n=new Uint8Array(i.response),o=this.getMimeType(n);switch(o||(o=this.getFileExtension(e)),o){case"png":case"image/png":var r=document.createElement("img");r.src=e,r.crossOrigin="anonymous",r.height=n[20]<<24|n[21]<<16|n[22]<<8|n[23],r.width=n[16]<<24|n[17]<<16|n[18]<<8|n[19],this._imageMap.set(e,r);break;case"jpg":case"jpeg":case"image/jpeg":var s=document.createElement("img");s.src=e,s.crossOrigin="anonymous";for(var a=0,u=0;u<n.length;u++)if(255==n[u]&&(192==n[u+1]||194==n[u+1])){a=u+5;break}0==a||(s.width=n[a]<<8|n[a+1],s.height=n[a+2]<<8|n[a+3]),this._imageMap.set(e,s);break;case"mp3":case"audio/mpeg":var c=document.createElement("audio");c.crossOrigin="anonymous",c.src=e,c.load(),this._audioMap.set(e,c);break;case"json":this._jsonMap.set(e,JSON.parse(i.responseText));break;default:return void this.dispatchEvent(new Event(h.EventType.ERROR))}this.dispatchEvent(new Event(h.EventType.LOADED)),0<this._paths.length?this.loadItem(this._paths.shift()):this.dispatchEvent(new Event(h.EventType.COMPLETE))}else this.dispatchEvent(new Event(h.EventType.ERROR))},_.prototype.getMimeType=function(t){switch(t[0]<<8|t[1]){case 18756:case 65531:case 65523:return"audio/mpeg";case 35152:return"image/png";case 18249:return"image/gif";case 9552:return"application/pdf";case 65496:case 56792:return"image/jpeg";case 20555:return"application/zip";default:return null}},_.prototype.getFileExtension=function(t){return t.substr(t.lastIndexOf(".")+1,t.length-1)},_);function _(){var t=r.call(this)||this;return t._paths=[],t._imageMap=new Map,t._audioMap=new Map,t._jsonMap=new Map,t}e.AssetLoader=l},function(t,e){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),(i=e.TileBounds||(e.TileBounds={}))[i.NONE=0]="NONE",i[i.TOP=1]="TOP",i[i.RIGHT=2]="RIGHT",i[i.BOTTOM=4]="BOTTOM",i[i.LEFT=8]="LEFT",i[i.DIAGONAL_UP=128]="DIAGONAL_UP",i[i.DIAGONAL_DOWN=129]="DIAGONAL_DOWN"},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(n.prototype.playPromise=function(t){var e=t.play();void 0!==e&&e.then(function(){}).catch(function(){})},n.prototype.dispose=function(){this._audio=null},n.prototype.play=function(){this.isPlaying=!0,this.playPromise(this._audio),this._audio.currentTime=this._pausedTime,this._audio.loop=this.loop},n.prototype.stop=function(){this.isPlaying=!1,this._audio.pause(),this._audio.currentTime=0},n.prototype.pause=function(){this._audio.loop&&(this._audio.pause(),this._pausedTime=this._audio.currentTime)},n);function n(t){this._pausedTime=0,this._audio=t}e.AudioClip=i},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=i(2),a=i(10),u=i(0),c=i(1),h=(r=s.Container,o(p,r),p.prototype.dispose=function(){this.removeChild(this._activeState),this._activeState.dispose(),this._upState.dispose(),this._downState&&this._downState.dispose(),this._overState&&this._overState.dispose(),u.Stage.context.canvas.onmousedown=null,u.Stage.context.canvas.onmousemove=null,u.Stage.context.canvas.onmouseup=null,this._activeState=null,this._upState=null,this._downState=null,this._overState=null,r.prototype.dispose.call(this)},p.prototype.intersectsPoint=function(t){return this._activeState.intersectsPoint(t)},p.prototype.intersectsXY=function(t,e){return this._activeState.intersectsXY(t,e)},p.prototype.forceUpState=function(){this.setMouseOut()},p.prototype.setMouseOut=function(){this._activeState=this._upState,this.removeAllChildren(),this.addChild(this._upState)},p.prototype.setMouseOver=function(){this._overState&&(this._activeState=this._overState,this.removeAllChildren(),this.addChild(this._overState))},p.prototype.setMouseDown=function(){this._downState&&(this._activeState=this._downState,this.removeAllChildren(),this.addChild(this._downState))},p.prototype.updateMouseState=function(){this._isMouseOver&&this._isMouseDown?this._downState?this.setMouseDown():this._overState?this.setMouseOver():this.setMouseOut():this._isMouseDown?this._downState?this.setMouseDown():this.setMouseOut():this._isMouseOver&&this._overState?this.setMouseOver():this.setMouseOut()},p.prototype.onMouseMove=function(t){this._activeState.intersectsXY(t.layerX,t.layerY)?(this._isMouseOver||(this._isMouseOver=!0,this.updateMouseState(),this.dispatchEvent(new Event(c.EventType.MOUSE_OVER))),u.Stage.instance.canvas.style.cursor="pointer"):(this._isMouseOver&&(this._isMouseOver=!1,this.updateMouseState(),this.dispatchEvent(new Event(c.EventType.MOUSE_OUT))),u.Stage.instance.canvas.style.cursor="auto")},p.prototype.onMouseDown=function(t){var e=t;this._activeState.intersectsXY(e.layerX,e.layerY)?(this._isClickTarget=!0,this._isMouseDown=!0,this.updateMouseState(),this.dispatchEvent(new Event(c.EventType.MOUSE_DOWN))):this._isClickTarget=!1},p.prototype.onMouseUp=function(t){u.Stage.instance.canvas.style.cursor="auto",this._isMouseDown=!1,this.updateMouseState(),this._activeState.intersectsXY(t.layerX,t.layerY)?this.dispatchEvent(new Event(c.EventType.CLICK)):this._isClickTarget&&this.dispatchEvent(new Event(c.EventType.MOUSE_UP)),this._isClickTarget=!1},p);function p(t,e,i){var n=r.call(this)||this;return n._overState=null,n._downState=null,n._upState=t,n._upState.anchorType=a.AnchorType.CENTER,null!=e&&(n._overState=e,n._overState.anchorType=a.AnchorType.CENTER),null!=i&&(n._downState=i,n._downState.anchorType=a.AnchorType.CENTER),n._activeState=n._upState,u.Stage.context.canvas.onmousedown=function(t){return n.onMouseDown(t)},u.Stage.context.canvas.onmousemove=function(t){return n.onMouseMove(t)},u.Stage.context.canvas.onmouseup=function(t){return n.onMouseUp(t)},n.update(),n.addChild(n._activeState),n}e.Button=h},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=i(15),a=i(20),u=i(34),c=i(36),h=i(18),p=i(10),l=i(4),_=i(38),f=i(8),d=i(11),y=i(9),m=(r=s.Scene,o(g,r),g.prototype.onAssetsError=function(){},g.prototype.init=function(){this.assets.add(a.Assets.BUNNY_PATH),this.assets.add(a.Assets.STAR_PATH),this.assets.add(a.Assets.ICE_SET_PATH),this.assets.add(a.Assets.MAP_DATA_PATH),this.assets.add(a.Assets.AUDIO_TEST)},g.prototype.onAssetsComplete=function(){this.createScene()},g.prototype.createScene=function(){var t=this.assets.getTileSet(a.Assets.ICE_SET_PATH,32,32),e=new u.TileAnimation(t);e.frameRate=10;var i=new c.TileMap(10,10);i.x=50,i.y=50,i.rotate(.03),i.rotationSpeed=-.01,i.velocity.set(5,5),i.animations.push(e),i.setData(t,this.assets.getJson(a.Assets.MAP_DATA_PATH).data);var n=this.assets.getSprite(a.Assets.BUNNY_PATH);n.blendMode=h.BlendMode.SOURCE_OVER,n.anchorType=p.AnchorType.CENTER,n.scale=2,n.smoothing=!1,n.graphics.fillStyle="#FF0000",n.graphics.fillRect(0,0,10,10),n.tint=new l.Color(0,1,0,.8),n.x=300,n.y=300,n.rotationSpeed=1;var o=this.assets.getSprite(a.Assets.STAR_PATH);o.blendMode=h.BlendMode.HARD_LIGHT,o.x=30,o.y=30,o.scale=1.3,o.alpha=.75,o.tint=new l.Color(1,0,0,.5),o.smoothing=!1,o.anchorType=p.AnchorType.CENTER,o.mask=a.Assets.BUNNY_PATH,o.rotationSpeed=2;var r=[n,o],s=new _.MovieClip;s.scale=3,s.frames=r,s.blendMode=h.BlendMode.COLOR,s.anchorType=p.AnchorType.CENTER,s.rotationSpeed=-4,s.x=100,s.y=100,s.framerate=3,s.tint=new l.Color(1,0,0,.8),this.addChild(i),n.addChild(o),this.addChild(n),this.addChild(s),f.Tweener.create(n).translate(0,300,0,300).rotate(0,1.4).scale(2,4,2,4).alpha(.1,1).duration(3).easing(d.EaseType.BOUNCE_IN_OUT).start(),y.AudioMixer.add(a.Assets.AUDIO_TEST,this.assets.getAudioClip(a.Assets.AUDIO_TEST),!0),y.AudioMixer.play(a.Assets.AUDIO_TEST)},g.prototype.dispose=function(){r.prototype.dispose.call(this)},g);function g(){return null!==r&&r.apply(this,arguments)||this}e.GameScene=m},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(35),o=(Object.defineProperty(r.prototype,"frames",{get:function(){return this._frames.tiles},enumerable:!0,configurable:!0}),r.prototype.tileAt=function(t){return this._frames.tileAt(Math.floor(t))},r);function r(t){this.frameRate=30,this.name="",this._frames=new n.TileCollection,this._frames.addTileSet(t)}e.TileAnimation=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(7),o=i(19),r=(s.prototype.tileAt=function(t){return this._tiles[t]},Object.defineProperty(s.prototype,"tiles",{get:function(){return this._tiles},enumerable:!0,configurable:!0}),s.prototype.addTileSet=function(t){var e,i;for(i=0;i<t.numTilesY;i++)for(e=0;e<t.numTilesX;e++)this._tiles.push(new n.Tile(t,e,i));return length},s.prototype.addTileSetRow=function(t,e){var i;for(i=0;i<t.numTilesX;i++)this._tiles.push(new n.Tile(t,i,e));return length},s.prototype.addTexture=function(t){return this._tiles.push(new n.Tile(new o.TileSet(t))),length},s.prototype.addTileCollection=function(t){var e;for(e=0;e<t.length;e++)this._tiles.push(t.tileAt(e));return length},s.prototype.removeAt=function(t,e){this._tiles.splice(t,e)},Object.defineProperty(s.prototype,"length",{get:function(){return this._tiles.length},enumerable:!0,configurable:!0}),s);function s(){this._tiles=[]}e.TileCollection=r},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var s,_=i(7),r=i(2),f=i(37),a=i(0),u=(s=r.Container,o(c,s),c.prototype.getTile=function(t,e){return this._tiles[e][t]},c.prototype.getTileAt=function(t){var e=this.mapWidth,i=t%e;return this._tiles[(t-i)/e][i]},c.prototype.setTileAt=function(t,e){var i=this.mapWidth,n=t%i;this._tiles[(t-n)/i][n]=e},Object.defineProperty(c.prototype,"animations",{get:function(){return this._animations},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"tileWidth",{get:function(){return this._tileWidth},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"tileHeight",{get:function(){return this._tileHeight},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"mapWidth",{get:function(){return this._tiles[0].length},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"mapHeight",{get:function(){return this._tiles.length},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"tileOverlapX",{get:function(){return 0==this._tileOverlapX?this._tileWidth:this._tileOverlapX},set:function(t){this._tileOverlapX=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"tileOverlapY",{get:function(){return 0==this._tileOverlapY?this.tileHeight:this._tileOverlapY},set:function(t){this._tileOverlapY=t},enumerable:!0,configurable:!0}),c.prototype.update=function(t){var e,i;for(void 0===t&&(t=!0),i=0;i<this._tiles.length;i++)for(e=0;e<this._tiles[0].length;e++)this._tiles[i][e].update();s.prototype.update.call(this,t)},c.prototype.draw=function(){var t,e,i,n,o=this.worldTransform.matrix;a.Stage.context.transform(o.m00,o.m10,o.m01,o.m11,o.m02,o.m12);var r=a.Stage.context;for(r.save(),0==t&&0==e||r.translate(t,e),0!=this.rotation&&r.rotate(this.rotation),1==this.scaleX&&1==this.scaleY||r.scale(this.scaleX,this.scaleY),e=0;e<this.mapHeight;e++)for(t=0;t<this.mapWidth;t++)null!=(i=this._tiles[e][t])&&null!=(n=i.tileSet)&&n.draw(i.tileX,i.tileY,this.tileOverlapX*t,this.tileOverlapY*e,this.tileWidth,this.tileHeight);s.prototype.draw.call(this),r.restore()},c.prototype.setData=function(t,e,i,n){var o=this._tiles[0].length,r=this._tiles.length;this._tileWidth=t.tileWidth,this._tileHeight=t.tileHeight;var s,a,u=[];for(a=0;a<t.numTilesY;a++)for(s=0;s<t.numTilesX;s++){var c=new _.Tile(t,s,a);u.push(c)}var h=0;for(a=0;a<r;a++)for(s=0;s<o;s++){switch(this.compareTo(e[h],0)){case-1:var p=Math.abs(e[h])-1;this._animations.length>p?this._tiles[a][s]=new f.AnimatedTile(this._animations[p]):this._tiles[a][s]=new _.Tile;break;case 0:this._tiles[a][s]=new _.Tile;break;case 1:var l=e[h];this._tiles[a][s]=_.Tile.fromTile(u[l-1])}h++}if(i)for(a=h=0;a<r;a++)for(s=0;s<o;s++)this._tiles[a][s].mapCode=i[h],h++;if(n)for(a=h=0;a<r;a++)for(s=0;s<o;s++)this._tiles[a][s].bounds=n[h],h++},c.prototype.compareTo=function(t,e){return t<e?-1:t==e?0:1},c);function c(t,e){void 0===t&&(t=10),void 0===e&&(e=10);var i=s.call(this)||this;i._animations=[],i._tileOverlapX=0,i._tileOverlapY=0,i._tileWidth=0,i._tileHeight=0,i._tiles=[];for(var n=0;n<e;n++){i._tiles[n]=[];for(var o=0;o<t;o++)i._tiles[n][o]=new _.Tile}return i}e.TileMap=u},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=i(7),a=i(6),u=(r=s.Tile,o(c,r),Object.defineProperty(c.prototype,"tileX",{get:function(){return this._animation.tileAt(this._frameProgression).tileX},set:function(t){this._animation.tileAt(this._frameProgression).tileX=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"tileY",{get:function(){return this._animation.tileAt(this._frameProgression).tileY},set:function(t){this._animation.tileAt(this._frameProgression).tileY=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"tileSet",{get:function(){return this._animation.tileAt(this._frameProgression).tileSet},enumerable:!0,configurable:!0}),c.prototype.update=function(){if(this.enabled){var t=this._animation.frameRate;0!=t&&(this._frameProgression+=t*a.Timer.deltaSeconds,0<t?this._frameProgression>=this._animation.frames.length&&(this._frameProgression=0):this._frameProgression<0&&(this._frameProgression=this._animation.frames.length))}r.prototype.update.call(this)},c);function c(t){var e=r.call(this,t.tileAt(0).tileSet)||this;return e._frameProgression=0,e.enabled=!0,e._animation=t,e}e.AnimatedTile=u},function(t,e,i){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r,s=i(17),a=i(6),u=(r=s.Sprite,o(c,r),c.prototype.dispose=function(){for(var t=0,e=this._frames;t<e.length;t++)e[t].dispose();r.prototype.dispose.call(this)},Object.defineProperty(c.prototype,"framerate",{get:function(){return this._framerate},set:function(t){this._framerate=t,this._updateInterval=1/t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"frames",{get:function(){return this._frames},set:function(t){this._frames=t,this.frame=0},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"frame",{set:function(t){this._currentFrame=t,null!=this._frames[this._currentFrame]&&(this.texture=this._frames[this._currentFrame].texture)},enumerable:!0,configurable:!0}),c.prototype.play=function(){this._isPaused=!1},c.prototype.stop=function(){this._isPaused=!0},c.prototype.update=function(t){if(void 0===t&&(t=!0),!this._isPaused)for(this._accumulator+=a.Timer.deltaSeconds;this._accumulator>=this._updateInterval;)this._currentFrame++,this._currentFrame>=this._frames.length&&(this._currentFrame=0),this._accumulator-=this._updateInterval,this.frame=this._currentFrame;r.prototype.update.call(this,t)},c);function c(){var t=r.call(this)||this;return t._frames=[],t._currentFrame=0,t._framerate=30,t._accumulator=0,t._updateInterval=0,t._isPaused=!1,t}e.MovieClip=u}]);